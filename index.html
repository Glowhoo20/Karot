<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CISS | Yasakl覺 Kelime Oyunu</title>
    <!-- Tailwind CSS -->
    <!-- Note: CDN is used for development. For production, use Tailwind CLI or PostCSS plugin -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: '#050a15',
                        accent: '#3b82f6',
                        danger: '#ef4444'
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/animations.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        .glass {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .tab-content {
            display: none;
            height: 100%;
        }

        .tab-content.active {
            display: flex;
            animation: fadeIn 0.2s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">
</head>

<body
    class="bg-[#050a15] dark:bg-[#050a15] light:bg-slate-50 text-slate-100 dark:text-slate-100 light:text-slate-900 min-h-[100dvh] flex flex-col overflow-hidden select-none">

    <!-- Red Flash Animation Layer -->
    <div id="flash-overlay"
        class="fixed inset-0 bg-red-600 opacity-0 pointer-events-none z-[100] transition-opacity duration-150"></div>


    <!-- Top Header -->
    <header class="p-4 flex justify-between items-center glass sticky top-0 z-50">
        <div>
            <h1
                class="text-xl font-extrabold tracking-tighter bg-gradient-to-r from-red-500 to-rose-600 bg-clip-text text-transparent italic">
                CISS</h1>
        </div>
        <div id="mic-status" class="flex items-center space-x-2">
            <div id="mic-pulse" class="w-2.5 h-2.5 bg-slate-700 rounded-full"></div>
            <span id="mic-text" class="text-[10px] font-bold uppercase tracking-widest text-slate-500">KAPALI</span>
        </div>
    </header>

    <!-- Main Views -->
    <main class="flex-1 relative overflow-hidden">

        <!-- Tab: Game (Live Stream) -->
        <section id="tab-game" class="tab-content active flex-col p-4 pb-20">
            <div id="transcript-container" class="flex-1 overflow-y-auto mb-4 flex flex-col justify-center pt-4">
                <div id="transcript-flow" class="space-y-3 max-w-lg mx-auto w-full">
                    <p class="text-slate-600 text-center italic text-sm py-12">Balat butonuna bas覺n ve konumaya
                        balay覺n...</p>
                </div>
            </div>

            <!-- Floating Start Button -->
            <div class="absolute bottom-24 left-0 right-0 flex justify-center pointer-events-none">
                <button id="start-btn"
                    class="w-20 h-20 rounded-full bg-emerald-500 flex items-center justify-center shadow-2xl shadow-emerald-500/20 active:scale-90 transition-all pointer-events-auto">
                    <svg id="play-icon" class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <svg id="stop-icon" class="w-10 h-10 text-white hidden" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H8a1 1 0 01-1-1V8z"
                            clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </section>

        <!-- Tab: Forbidden Words -->
        <section id="tab-words" class="tab-content flex-col p-6 pb-24 overflow-y-auto">
            <h2 class="text-2xl font-black mb-6 italic">KEL襤MELER</h2>
            <form id="word-form"
                class="flex items-center space-x-2 bg-slate-900/50 p-2 rounded-2xl border border-slate-800 mb-6">
                <input type="text" id="word-input" placeholder="Yasakl覺 kelime..."
                    class="bg-transparent border-none text-white flex-1 px-4 outline-none text-lg">
                <button type="submit"
                    class="bg-blue-600 p-3 rounded-xl shadow-lg shadow-blue-500/20 active:scale-95 transition-all">
                    <svg class="w-6 h-6" fill="6" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                </button>
            </form>
            <div id="forbidden-words-list" class="grid grid-cols-2 gap-3"></div>
        </section>

        <!-- Tab: Players -->
        <section id="tab-players" class="tab-content flex-col p-6 pb-24 overflow-y-auto">
            <h2 class="text-2xl font-black mb-6 italic">SKORLAR</h2>

            <!-- Game Stats Card -->
            <div id="game-stats-card" class="glass-card p-4 rounded-2xl mb-6 grid grid-cols-2 gap-4">
                <div class="text-center">
                    <div class="text-[10px] text-slate-500 font-bold uppercase mb-1">SEV襤YE</div>
                    <div id="stat-level" class="text-2xl font-black text-blue-400">1</div>
                </div>
                <div class="text-center">
                    <div class="text-[10px] text-slate-500 font-bold uppercase mb-1">SER襤</div>
                    <div id="stat-streak" class="text-2xl font-black text-orange-400">0</div>
                </div>
                <div class="text-center">
                    <div class="text-[10px] text-slate-500 font-bold uppercase mb-1">DORULUK</div>
                    <div id="stat-accuracy" class="text-xl font-black text-green-400">100%</div>
                </div>
                <div class="text-center">
                    <div class="text-[10px] text-slate-500 font-bold uppercase mb-1">KEL襤ME</div>
                    <div id="stat-words" class="text-xl font-black text-purple-400">0</div>
                </div>
            </div>

            <form id="player-form"
                class="flex items-center space-x-2 bg-slate-900/50 p-2 rounded-2xl border border-slate-800 mb-8">
                <input type="text" id="player-input" placeholder="Oyuncu ismi..."
                    class="bg-transparent border-none text-white flex-1 px-4 outline-none text-lg">
                <button type="submit"
                    class="bg-indigo-600 p-3 rounded-xl shadow-lg shadow-indigo-500/20 active:scale-95 transition-all">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                </button>
            </form>
            <div id="player-list" class="space-y-4"></div>
            <button id="reset-scores"
                class="mt-12 text-slate-500 font-bold uppercase tracking-widest text-xs w-full py-4 border border-dashed border-slate-800 rounded-2xl active:bg-red-900/10">Skorlar覺
                S覺f覺rla</button>
        </section>

        <!-- Tab: Achievements -->
        <section id="tab-achievements" class="tab-content flex-col p-6 pb-24 overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-black italic">BAARIMLAR</h2>
                <div class="text-sm text-slate-500">
                    <span id="achievement-progress">0</span>/<span id="achievement-total">0</span>
                </div>
            </div>
            <div id="achievements-list" class="grid grid-cols-2 gap-4"></div>
        </section>

    </main>

    <!-- Bottom Navbar -->
    <nav class="fixed bottom-0 left-0 right-0 h-20 glass flex justify-around items-center z-50 px-4">
        <button onclick="switchTab('game', this)"
            class="nav-btn active flex flex-col items-center space-y-1 text-blue-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z">
                </path>
            </svg>
            <span class="text-[9px] font-black tracking-widest">D襤NLE</span>
        </button>
        <button onclick="switchTab('words', this)" class="nav-btn flex flex-col items-center space-y-1 text-slate-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                </path>
            </svg>
            <span class="text-[9px] font-black tracking-widest">YASAKLI</span>
        </button>
        <button onclick="switchTab('players', this)"
            class="nav-btn flex flex-col items-center space-y-1 text-slate-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z">
                </path>
            </svg>
            <span class="text-[9px] font-black tracking-widest">SKORLAR</span>
        </button>
        <button onclick="switchTab('achievements', this)"
            class="nav-btn flex flex-col items-center space-y-1 text-slate-500">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z">
                </path>
            </svg>
            <span class="text-[9px] font-black tracking-widest">ROZETLER</span>
        </button>

    </nav>

    <!-- Scripts -->
    <!-- Utilities -->
    <script src="assets/js/utils/helpers.js"></script>
    <script src="assets/js/utils/effects.js"></script>
    <!-- Components -->
    <script src="assets/js/components/game.js"></script>
    <script src="assets/js/components/achievements.js"></script>
    <script src="assets/js/components/leaderboard.js"></script>
    <script src="assets/js/components/theme.js"></script>
    <!-- Services -->
    <script src="assets/js/services/speech.js"></script>
    <script src="assets/js/services/speech-cloud.js"></script>
    <script src="assets/js/services/speech-wrapper.js"></script>
    <!-- Main app -->
    <script src="assets/js/app.js"></script>
    <!-- API Key Configuration -->
    <!-- Load from config.js -->
    <script src="assets/js/config/config.js"></script>

    <!-- Initialize API key -->
    <script>
        // Google Cloud API Key Configuration
        // API key config.js dosyas覺ndan y羹klenir
        // Detaylar i癟in API_KEY_SETUP.md dosyas覺na bak覺n

        // Get API key from config.js (loaded above)
        const apiKey = window.GOOGLE_CLOUD_API_KEY || '';

        // Initialize API key if provided
        if (apiKey && window.SpeechService && window.SpeechService.setApiKey) {
            window.SpeechService.setApiKey(apiKey);
            console.log("[Config] Google Cloud API key y羹klendi");
        } else {
            console.warn("[Config] Google Cloud API key bulunamad覺, Web Speech API kullan覺lacak");
            console.info("[Config] API key eklemek i癟in:");
            console.info("  1. assets/js/config/config.js.example dosyas覺n覺 assets/js/config/config.js olarak kopyalay覺n");
            console.info("  2. config.js dosyas覺na API key'inizi ekleyin");
            console.info("  Detaylar i癟in API_KEY_SETUP.md dosyas覺na bak覺n");
        }
    </script>
    <script>
        function switchTab(tabId, btn) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('text-blue-500'));
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.add('text-slate-500'));

            const tab = document.getElementById('tab-' + tabId);
            if (tab) {
                tab.classList.add('active');
            }

            if (btn) {
                btn.classList.remove('text-slate-500');
                btn.classList.add('text-blue-500');
            }

            // Refresh data when switching tabs
            if (tabId === 'achievements' && window.renderAchievements) {
                window.renderAchievements();
            }
            if (tabId === 'leaderboard' && window.renderLeaderboard) {
                window.renderLeaderboard();
            }
        }

        // Theme change handler
        window.addEventListener('themeChanged', (e) => {
            const theme = e.detail;
            const iconDark = document.getElementById('theme-icon-dark');
            const iconLight = document.getElementById('theme-icon-light');

            if (theme === 'dark') {
                if (iconDark) iconDark.classList.remove('hidden');
                if (iconLight) iconLight.classList.add('hidden');
            } else {
                if (iconDark) iconDark.classList.add('hidden');
                if (iconLight) iconLight.classList.remove('hidden');
            }
        });

        // Note: renderAchievements and renderLeaderboard are defined in app.js
    </script>
</body>

</html>